"use strict";(self.webpackChunkopenfga_dev=self.webpackChunkopenfga_dev||[]).push([[521],{1840:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var n=a(87462),i=(a(67294),a(3905)),r=a(5270);const o={title:"Entitlements",description:"Modeling Entitlements for a System",sidebar_position:1,slug:"/modeling/advanced/entitlements"},l="Modeling Entitlements for a System with <ProductName format={ProductNameFormat.ShortForm}/>",s={unversionedId:"content/modeling/advanced/entitlements",id:"content/modeling/advanced/entitlements",title:"Entitlements",description:"Modeling Entitlements for a System",source:"@site/docs/content/modeling/advanced/entitlements.mdx",sourceDirName:"content/modeling/advanced",slug:"/modeling/advanced/entitlements",permalink:"/docs/modeling/advanced/entitlements",draft:!1,editUrl:"https://github.com/openfga/openfga.dev/edit/main/docs/content/modeling/advanced/entitlements.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Entitlements",description:"Modeling Entitlements for a System",sidebar_position:1,slug:"/modeling/advanced/entitlements"},sidebar:"docs",previous:{title:"IoT",permalink:"/docs/modeling/advanced/iot"},next:{title:"Migrating Relations",permalink:"/docs/modeling/migrating/migrating-relations"}},p={},u=[{value:"Before You Start",id:"before-you-start",level:2},{value:"<ProductName format={ProductNameFormat.ShortForm}/> Concepts",id:"-concepts",level:3},{value:"Modeling Object-to-Object Relationships",id:"modeling-object-to-object-relationships",level:4},{value:"Direct Relationships",id:"direct-relationships",level:4},{value:"Concepts &amp; Configuration Language",id:"concepts--configuration-language",level:4},{value:"What You Will Be Modeling",id:"what-you-will-be-modeling",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Defined Scenarios",id:"defined-scenarios",level:3},{value:"Modeling Entitlements For GitHub",id:"modeling-entitlements-for-github",level:2},{value:"01. Building The Initial Authorization Model And Relationship Tuples",id:"01-building-the-initial-authorization-model-and-relationship-tuples",level:3},{value:"02. Populating The Relationship Tuples",id:"02-populating-the-relationship-tuples",level:3},{value:"Verification",id:"verification",level:4},{value:"03. Updating The Authorization Model",id:"03-updating-the-authorization-model",level:3},{value:"Adding Modeling Pattern Of Parent-Child Objects",id:"adding-modeling-pattern-of-parent-child-objects",level:4},{value:"Adding Subscriber Relationship With Another Object Related To x associated_plan",id:"adding-subscriber-relationship-with-another-object-related-to-x-associated_plan",level:4},{value:"Disallow Direction Relationship",id:"disallow-direction-relationship",level:4},{value:"Verification",id:"verification-1",level:4},{value:"Summary",id:"summary",level:2}],d={toc:u};function m(e){let{components:t,...o}=e;return(0,i.kt)("wrapper",(0,n.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"modeling-entitlements-for-a-system-with-"},"Modeling Entitlements for a System with ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})),(0,i.kt)(r.AH,{mdxType:"DocumentationNotice"}),(0,i.kt)("p",null,"This tutorial explains how to model entitlements for a platform like GitHub using ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"}),"."),(0,i.kt)(r.S1,{title:"What you will learn",mdxType:"CardBox"},(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"How to model an entitlement use case in ",(0,i.kt)(r.rZ,{format:r.v7.ProductLink,mdxType:"ProductName"})),(0,i.kt)("li",{parentName:"ul"},"How to start with a given set of requirements and scenarios and iterate on the ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," model until those requirements are met"))),(0,i.kt)(r.XQ,{title:"Entitlements",preset:"entitlements",example:"Entitlements",store:"entitlements",mdxType:"Playground"}),(0,i.kt)("h2",{id:"before-you-start"},"Before You Start"),(0,i.kt)("p",null,"In order to understand this guide correctly you must be familiar with some ",(0,i.kt)(r.rZ,{format:r.v7.LongForm,mdxType:"ProductName"})," concepts and know how to develop the things that we will list below."),(0,i.kt)("details",null,(0,i.kt)("summary",null,(0,i.kt)("h3",{id:"-concepts"},(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," Concepts"),(0,i.kt)("p",null,"It would be helpful to have an understanding of some concepts of ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," before you start.")),(0,i.kt)("h4",{id:"modeling-object-to-object-relationships"},"Modeling Object-to-Object Relationships"),(0,i.kt)("p",null,"You need to know how to create relationships between objects and how that might affect a user's relationships to those objects. ",(0,i.kt)("a",{parentName:"p",href:"/docs/modeling/building-blocks/object-to-object-relationships"},"Learn more \u2192")),(0,i.kt)("p",null,"Used here to indicate that members of an org are subscriber members of the plan the org is subscriber to, and subscriber members of a plan get access to all the plan's features."),(0,i.kt)("h4",{id:"direct-relationships"},"Direct Relationships"),(0,i.kt)("p",null,"You need to know how to disallow granting direct relation to an object and requiring the user to have a relation with another object that would imply a relation with the first one. ",(0,i.kt)("a",{parentName:"p",href:"/docs/modeling/building-blocks/direct-relationships"},"Learn more \u2192")),(0,i.kt)("p",null,'Used here to indicate that "access" to a feature cannot be directly granted to a user, but is implied through the users organization subscribing to a plan that offers that feature.'),(0,i.kt)("h4",{id:"concepts--configuration-language"},"Concepts & Configuration Language"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Some ",(0,i.kt)(r.uH,{mdxType:"ProductConcept"})),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/configuration-language"},"Configuration Language")))),(0,i.kt)("h2",{id:"what-you-will-be-modeling"},"What You Will Be Modeling"),(0,i.kt)("p",null,"In many product offerings, the features are behind multiple tiers. In this tutorial, you will build an authorization model for a subset of ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/pricing"},"GitHub's entitlements")," (detailed below) using ",(0,i.kt)(r.rZ,{format:r.v7.LongForm,mdxType:"ProductName"}),". You will use some scenarios to validate the model."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"GitHub Pricing Plan",src:a(9843).Z,width:"1200",height:"763"})),(0,i.kt)("p",null,'At their core, entitlements is just asking: does a user X have access to feature Y? In GitHub\'s case for example, they have a concept called "Draft Pull Requests". Once the user loads the Pull Request page, the frontend needs to know whether it can show the "Draft Pull Request" option, as in it needs to know: "Does the current user have access to feature Draft Pull Request?".'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"GitHub PR Page with Draft Pull Request",src:a(48847).Z,width:"1796",height:"756"}),"\n",(0,i.kt)("img",{alt:"GitHub PR Page without Draft Pull Request",src:a(15084).Z,width:"1796",height:"756"})),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: For brevity, this tutorial will not model all of GitHub entitlements. Instead, it will focus on modeling for the scenarios outlined below")),(0,i.kt)("h3",{id:"requirements"},"Requirements"),(0,i.kt)("p",null,"You will model an entitlement system similar to GitHub's, focusing on a few scenarios."),(0,i.kt)("p",null,'GitHub has 3 plans: "Free", "Team" and "Enterprise", with each of them offering several features. The higher-priced plans include all the features of the lower priced plans. You will be focusing on a subset of the features offered.'),(0,i.kt)("p",null,"A summary of GitHub's entitlement system:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Free",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Issues"))),(0,i.kt)("li",{parentName:"ul"},"Team",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Everything from the free plan")),(0,i.kt)("li",{parentName:"ul"},"Draft Pull Requests"))),(0,i.kt)("li",{parentName:"ul"},"Enterprise",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Everything from the team plan")),(0,i.kt)("li",{parentName:"ul"},"SAML Single Sign-On")))),(0,i.kt)("h3",{id:"defined-scenarios"},"Defined Scenarios"),(0,i.kt)("p",null,"Use the following scenarios to be able to validate whether the model of the requirements is correct."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Take these three organizations"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Alpha Beta Gamma (",(0,i.kt)("inlineCode",{parentName:"li"},"alpha"),"), a ",(0,i.kt)("strong",{parentName:"li"},"subscriber")," on the ",(0,i.kt)("strong",{parentName:"li"},"free")," plan"),(0,i.kt)("li",{parentName:"ul"},"Bayer Water Supplies (",(0,i.kt)("inlineCode",{parentName:"li"},"bayer"),"), a ",(0,i.kt)("strong",{parentName:"li"},"subscriber")," on the ",(0,i.kt)("strong",{parentName:"li"},"team")," plan"),(0,i.kt)("li",{parentName:"ul"},"Cups and Dishes (",(0,i.kt)("inlineCode",{parentName:"li"},"cups"),"), a ",(0,i.kt)("strong",{parentName:"li"},"subscriber")," on the ",(0,i.kt)("strong",{parentName:"li"},"enterprise")," plan"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Take these three users"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Anne"),", ",(0,i.kt)("strong",{parentName:"li"},"member")," of ",(0,i.kt)("strong",{parentName:"li"},"Alpha Beta Gamma")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Beth"),", ",(0,i.kt)("strong",{parentName:"li"},"member")," of ",(0,i.kt)("strong",{parentName:"li"},"Bayer Water Supplies")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Charles"),", ",(0,i.kt)("strong",{parentName:"li"},"member")," of ",(0,i.kt)("strong",{parentName:"li"},"Cups and Dishes"))))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Image showing requirements",src:a(17638).Z,width:"940",height:"750"})),(0,i.kt)("p",null,"By the end of this tutorial, you should be able to query ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," with queries like:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Anne")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Issues")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Anne")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Draft Pull Requests")," (expecting",(0,i.kt)("inlineCode",{parentName:"li"}," no"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Anne")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Single Sign-on")," (expecting",(0,i.kt)("inlineCode",{parentName:"li"}," no"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Beth")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Issues")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Beth")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Draft Pull Requests")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Beth")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Single Sign-on")," (expecting",(0,i.kt)("inlineCode",{parentName:"li"}," no"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Charles")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Issues")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Charles")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Draft Pull Requests")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Charles")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Single Sign-on")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")")),(0,i.kt)("h2",{id:"modeling-entitlements-for-github"},"Modeling Entitlements For GitHub"),(0,i.kt)("h3",{id:"01-building-the-initial-authorization-model-and-relationship-tuples"},"01. Building The Initial Authorization Model And Relationship Tuples"),(0,i.kt)("p",null,"In this tutorial you are going to take a different approach to previous tutorials. You will start with a simple",(0,i.kt)(r.uH,{section:"what-is-an-authorization-model",linkName:"authorization model",mdxType:"ProductConcept"}),", add ",(0,i.kt)(r.uH,{section:"what-is-a-relationship-tuple",linkName:"relationship tuples",mdxType:"ProductConcept"})," to represent some sample scenarios, and iterate until those scenarios return the results you expect."),(0,i.kt)("p",null,"In the scenarios outlined above, you have ",(0,i.kt)("inlineCode",{parentName:"p"},"organizations"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"plans")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"features"),"."),(0,i.kt)("p",null,"Similar to the example above, start with a basic listing of the types and their relations:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A ",(0,i.kt)("inlineCode",{parentName:"li"},"feature")," has a ",(0,i.kt)("inlineCode",{parentName:"li"},"plan")," associated to it, we'll call the relation between them ",(0,i.kt)("inlineCode",{parentName:"li"},"associated_plan")),(0,i.kt)("li",{parentName:"ul"},"A ",(0,i.kt)("inlineCode",{parentName:"li"},"plan")," has an organization as a ",(0,i.kt)("inlineCode",{parentName:"li"},"subscriber")," to it"),(0,i.kt)("li",{parentName:"ul"},"An ",(0,i.kt)("inlineCode",{parentName:"li"},"organization")," has users as ",(0,i.kt)("inlineCode",{parentName:"li"},"members"))),(0,i.kt)(r.lG,{configuration:{type_definitions:[{type:"user"},{type:"feature",relations:{associated_plan:{this:{}}}},{type:"plan",relations:{subscriber:{this:{}}}},{type:"organization",relations:{member:{this:{}}}}]},mdxType:"AuthzModelSnippetViewer"}),(0,i.kt)("h3",{id:"02-populating-the-relationship-tuples"},"02. Populating The Relationship Tuples"),(0,i.kt)("p",null,"Now you can add the relationship tuples to represent these relationships mentioned in the ",(0,i.kt)("a",{parentName:"p",href:"#requirements"},"requirements")," and ",(0,i.kt)("a",{parentName:"p",href:"#defined-scenarios"},"scenarios")," sections:"),(0,i.kt)("p",null,"The relations between the features and plans are as follows:"),(0,i.kt)(r.Gb,{relationshipTuples:[{_description:"the free plan is the associated plan of the issues feature",user:"plan:free",relation:"associated_plan",object:"feature:issues"},{_description:"the team plan is the associated plan of the issues feature",user:"plan:team",relation:"associated_plan",object:"feature:issues"},{_description:"the team plan is the associated plan of the draft pull requests feature",user:"plan:team",relation:"associated_plan",object:"feature:draft_prs"},{_description:"the enterprise plan is the associated plan of the issues feature",user:"plan:enterprise",relation:"associated_plan",object:"feature:issues"},{_description:"the enterprise plan is the associated plan of the draft pull requests feature",user:"plan:enterprise",relation:"associated_plan",object:"feature:draft_prs"},{_description:"the enterprise plan is the associated plan of the SAML Single Sign-on feature",user:"plan:enterprise",relation:"associated_plan",object:"feature:sso"}],mdxType:"WriteRequestViewer"}),(0,i.kt)("p",null,"The relations between the plans and the organizations are as follows:"),(0,i.kt)(r.Gb,{relationshipTuples:[{_description:"the Alpha Beta Gamma organization is a subscriber of the free plan",user:"organization:alpha",relation:"subscriber",object:"plan:free"},{_description:"the Bayer Water Supplies organization is a subscriber of the team plan",user:"organization:bayer",relation:"subscriber",object:"plan:team"},{_description:"the Cups and Dishes organization is a subscriber of the enterprise plan",user:"organization:cups",relation:"subscriber",object:"plan:enterprise"}],mdxType:"WriteRequestViewer"}),(0,i.kt)("p",null,"The relations between the organizations and the users are as follows:"),(0,i.kt)(r.Gb,{relationshipTuples:[{_description:"anne is a member of the Alpha Beta Gamma organization",user:"user:anne",relation:"member",object:"organization:alpha"},{_description:"beth is a member of the Bayer Water Supplies",user:"user:beth",relation:"member",object:"organization:bayer"},{_description:"charles is a member of the Cups and Dishes organization",user:"user:charles",relation:"member",object:"organization:cups"}],mdxType:"WriteRequestViewer"}),(0,i.kt)("p",null,"So far you have given ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," a representation of the current state of your system's relationships. You will keep iterating and updating the authorization model until the results of the queries match what you expect."),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"In production, it is highly recommended to use unique, immutable identifiers. Names are used in this article to make it easier to read and follow.\nFor example, the relationship tuple indicating that ",(0,i.kt)("em",{parentName:"p"},"anne is a member of organization:alpha")," could be written as:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"user: user:2b4840f2-7c9c-42c8-9329-911002051524"),(0,i.kt)("li",{parentName:"ul"},"relation: member"),(0,i.kt)("li",{parentName:"ul"},"object: project:52e529c6-c571-4d5c-b78a-bc574cf98b54"))),(0,i.kt)("h4",{id:"verification"},"Verification"),(0,i.kt)("p",null,"Now that you have some data, you can start using it to ask is ${USER} related to ${OBJECT} as ${RELATION}?"),(0,i.kt)("p",null,"First, you will ",(0,i.kt)(r.uH,{section:"what-is-a-check-request",linkName:"check",mdxType:"ProductConcept"})," if ",(0,i.kt)("inlineCode",{parentName:"p"},"anne")," is a member of ",(0,i.kt)("inlineCode",{parentName:"p"},"organization:alpha"),". This is one of the relationship tuples you previously added, you will make sure ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," can detect a relation in this case."),(0,i.kt)(r.uT,{user:"user:anne",relation:"member",object:"organization:alpha",allowed:!0,mdxType:"CheckRequestViewer"}),(0,i.kt)("p",null,"Querying for relationship tuples that you fed into ",(0,i.kt)(r.rZ,{format:r.v7.LongForm,mdxType:"ProductName"})," earlier should work, try a few before proceeding to make sure everything is working well."),(0,i.kt)(r.uT,{user:"user:anne",relation:"member",object:"organization:bayer",allowed:!1,mdxType:"CheckRequestViewer"}),(0,i.kt)(r.uT,{user:"organization:bayer",relation:"subscriber",object:"plan:team",allowed:!0,mdxType:"CheckRequestViewer"}),(0,i.kt)(r.uT,{user:"plan:free",relation:"associated_plan",object:"feature:issues",allowed:!0,mdxType:"CheckRequestViewer"}),(0,i.kt)("h3",{id:"03-updating-the-authorization-model"},"03. Updating The Authorization Model"),(0,i.kt)("p",null,"You are working towards ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," returning the correct answer when you query whether ",(0,i.kt)("inlineCode",{parentName:"p"},"anne")," has ",(0,i.kt)("inlineCode",{parentName:"p"},"access")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"feature:issues"),". It won't work yet, but you will keep updating your configuration to reach that goal."),(0,i.kt)("p",null,"To start, try to run that query on ",(0,i.kt)("inlineCode",{parentName:"p"},"is anne related to feature:issues as access?")),(0,i.kt)(r.uT,{user:"user:anne",relation:"access",object:"feature:issues",mdxType:"CheckRequestViewer"}),(0,i.kt)("p",null,"The ",(0,i.kt)(r.rZ,{format:r.v7.LongForm,mdxType:"ProductName"})," service is returning that the query tuple is invalid. That is because you are asking for relation as ",(0,i.kt)("inlineCode",{parentName:"p"},"access"),", but that relation is not in the configuration of the ",(0,i.kt)("inlineCode",{parentName:"p"},"feature")," type!"),(0,i.kt)("p",null,"Add it now. Like so:"),(0,i.kt)(r.lG,{configuration:{type:"feature",relations:{associated_plan:{this:{}},access:{this:{}}}},mdxType:"AuthzModelSnippetViewer"}),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("inlineCode",{parentName:"p"},"access")," ",(0,i.kt)(r.uH,{section:"what-is-a-relation",linkName:"relation",mdxType:"ProductConcept"})," was added to the configuration of the ",(0,i.kt)("inlineCode",{parentName:"p"},"feature")," ",(0,i.kt)(r.uH,{section:"what-is-a-type",linkName:"type",mdxType:"ProductConcept"}),".")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"In this tutorial, you will find the phrases ",(0,i.kt)(r.uH,{section:"what-are-direct-and-implied-relationships",linkName:"direct relationship and implied relationship",mdxType:"ProductConcept"}),"."),(0,i.kt)("p",{parentName:"admonition"},"A ",(0,i.kt)("em",{parentName:"p"},"direct relationship")," R between user X and object Y means the relationship tuple (user=X, relation=R, object=Y) exists, and the ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," authorization model for that relation allows this direct relationship (by use of ",(0,i.kt)("inlineCode",{parentName:"p"},"self"),")."),(0,i.kt)("p",{parentName:"admonition"},"An ",(0,i.kt)("em",{parentName:"p"},"implied relationship")," R exists between user X and object Y if user X is related to an object Z that is in direct or implied relationship with object Y, and the ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," authorization model allows it.")),(0,i.kt)("p",null,"The resulting updated configuration would be:"),(0,i.kt)(r.lG,{configuration:{type_definitions:[{type:"user"},{type:"feature",relations:{associated_plan:{this:{}},access:{this:{}}}},{type:"plan",relations:{subscriber:{this:{}}}},{type:"organization",relations:{member:{this:{}}}}]},mdxType:"AuthzModelSnippetViewer"}),(0,i.kt)("h4",{id:"adding-modeling-pattern-of-parent-child-objects"},"Adding Modeling Pattern Of Parent-Child Objects"),(0,i.kt)("p",null,"Now we can ask the following query: ",(0,i.kt)("inlineCode",{parentName:"p"},"is anne related to feature:issues as access?")," again."),(0,i.kt)(r.uT,{user:"user:anne",relation:"access",object:"feature:issues",allowed:!1,mdxType:"CheckRequestViewer"}),(0,i.kt)("p",null,"So far so good. ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," understood your query, but said that no ",(0,i.kt)(r.uH,{section:"what-is-a-relation",linkName:"relation",mdxType:"ProductConcept"})," exists. That is because according to the configuration provided so far, there is no ",(0,i.kt)("inlineCode",{parentName:"p"},"access")," relation between ",(0,i.kt)("inlineCode",{parentName:"p"},"anne")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"feature:issues"),"."),(0,i.kt)("p",null,"We can also try to query ",(0,i.kt)("inlineCode",{parentName:"p"},"is organization:alpha related to feature:issues as access?")," and we see that there is no relationship."),(0,i.kt)(r.uT,{user:"organization:alpha",relation:"access",object:"feature:issues",allowed:!1,mdxType:"CheckRequestViewer"}),(0,i.kt)("p",null,"If you have already completed some of the other tutorials you might have encountered the modeling pattern of ",(0,i.kt)("a",{parentName:"p",href:"/docs/modeling/parent-child"},"parent-child objects")," which is modeled as such:"),(0,i.kt)(r.lG,{configuration:{viewer:{tupleToUserset:{tupleset:{relation:"parent"},computedUserset:{relation:"all_objects_viewer"}}}},mdxType:"AuthzModelSnippetViewer"}),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"With this, when asked to check a user's ",(0,i.kt)("inlineCode",{parentName:"p"},"viewer")," relationship with the object, ",(0,i.kt)(r.rZ,{format:r.v7.LongForm,mdxType:"ProductName"})," will:"),(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},"Read all relationship tuples of users related to this particular object as relation ",(0,i.kt)("inlineCode",{parentName:"li"},"parent")),(0,i.kt)("li",{parentName:"ol"},"For each relationship tuple, return all ",(0,i.kt)("em",{parentName:"li"},"usersets")," that have ",(0,i.kt)("inlineCode",{parentName:"li"},"all_objects_viewer")," relation to the objects in those relationship tuples"),(0,i.kt)("li",{parentName:"ol"},"If the user is in any of those ",(0,i.kt)("em",{parentName:"li"},"usersets"),", return yes, as the user is a ",(0,i.kt)("inlineCode",{parentName:"li"},"viewer")," on this object.\nIn other words, users related as ",(0,i.kt)("inlineCode",{parentName:"li"},"all_objects_viewer")," to any of this object's ",(0,i.kt)("inlineCode",{parentName:"li"},"parents")," are related as ",(0,i.kt)("inlineCode",{parentName:"li"},"viewer")," to this object.\n:::")),(0,i.kt)("p",{parentName:"admonition"},"If you want to give all subscribers on a plan access to a feature, you can do it like so:"),(0,i.kt)(r.lG,{configuration:{type:"feature",relations:{associated_plan:{this:{}},access:{union:{child:[{this:{}},{tupleToUserset:{tupleset:{relation:"associated_plan"},computedUserset:{relation:"subscriber"}}}]}}}},mdxType:"AuthzModelSnippetViewer"})),(0,i.kt)("p",null,"users related to ",(0,i.kt)("inlineCode",{parentName:"p"},"feature")," as ",(0,i.kt)("inlineCode",{parentName:"p"},"access")," are the union of (any of):\n",(0,i.kt)("em",{parentName:"p"}," the set of users with a direct ",(0,i.kt)("inlineCode",{parentName:"em"},"access")," relation\n")," the set of users related to the ",(0,i.kt)("inlineCode",{parentName:"p"},"associated_plan")," as ",(0,i.kt)("inlineCode",{parentName:"p"},"subscriber")," (the feature's associated plans' subscribers)\nSo everyone who has direct access, as well as the subscribers of the associated plan\n:::"),(0,i.kt)("p",null,"That would mean that in order for an object to have an ",(0,i.kt)("inlineCode",{parentName:"p"},"access")," relation to a feature y, there needs to be either a:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"a ",(0,i.kt)(r.uH,{section:"what-are-direct-and-implied-relationships",linkName:"direct relationship",mdxType:"ProductConcept"})," via a relationship tuple:\ne.g. ",(0,i.kt)("inlineCode",{parentName:"li"},'{ "user": "user:x", "relation": "access", "object": "feature:y" }')),(0,i.kt)("li",{parentName:"ul"},"subscriber relationship with another object related to x associated_plan:\ne.g. ",(0,i.kt)("inlineCode",{parentName:"li"},'{ "user": "user:x", "relation": "subscriber", "object": "plan:z" } { "user": "plan:z", "relation": "associated_plan", "object": "feature:y" }'))),(0,i.kt)("p",null,"That brings you close. That will allow you to grant organizations access to the feature (as organizations have a subscriber relation with the plan)."),(0,i.kt)("h4",{id:"adding-subscriber-relationship-with-another-object-related-to-x-associated_plan"},"Adding Subscriber Relationship With Another Object Related To x associated_plan"),(0,i.kt)("p",null,"One way forward would be to add a direct ",(0,i.kt)("inlineCode",{parentName:"p"},"access")," relation between a user and a feature e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},'{ "user": "anne", "relation": "access", "object": "feature:y" }')," whenever the organization anne is subscribed to a plan, or the organization anne is in subscribes to a new plan.\nBut there are several downsides to this:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Your application layer now needs to worry about computing this relationship. Instead of letting ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," figure this all out, the app layer needs to do the checks whenever a user is being added or removed"),(0,i.kt)("li",{parentName:"ul"},"If an organization changes its subscription, your application layer has to loop through all the users and update their ",(0,i.kt)("inlineCode",{parentName:"li"},"access")," relationships to features accordingly")),(0,i.kt)("p",null,"Later in this tutorial, you will remove the possibility of having a direct ",(0,i.kt)("inlineCode",{parentName:"p"},"access")," relation completely, but for now you will make sure the changes to the store you have made so far are working."),(0,i.kt)("p",null,"Replace all the existing code you had previously with the updated authorization model from the below snippet."),(0,i.kt)(r.lG,{configuration:{type_definitions:[{type:"user"},{type:"feature",relations:{associated_plan:{this:{}},access:{union:{child:[{this:{}},{tupleToUserset:{tupleset:{relation:"associated_plan"},computedUserset:{relation:"subscriber"}}}]}}}},{type:"plan",relations:{subscriber:{this:{}}}},{type:"organization",relations:{member:{this:{}}}}]},mdxType:"AuthzModelSnippetViewer"}),(0,i.kt)("p",null,"Now we can ask following query: ",(0,i.kt)("inlineCode",{parentName:"p"},"is organization:alpha related to feature:issues as access?")," again."),(0,i.kt)(r.uT,{user:"organization:alpha",relation:"access",object:"feature:issues",allowed:!0,mdxType:"CheckRequestViewer"}),(0,i.kt)("p",null,"You will notice that ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," now did find a relation, as ",(0,i.kt)("inlineCode",{parentName:"p"},"organization:alpha")," is a ",(0,i.kt)("inlineCode",{parentName:"p"},"subscriber")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"plan:free")," which has an ",(0,i.kt)("inlineCode",{parentName:"p"},"associated_plan")," relation to ",(0,i.kt)("inlineCode",{parentName:"p"},"feature:issues"),". From that and the authorization model you updated above, ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," deduced that ",(0,i.kt)("inlineCode",{parentName:"p"},"organization:alpha")," has an implied ",(0,i.kt)("inlineCode",{parentName:"p"},"access")," relation to ",(0,i.kt)("inlineCode",{parentName:"p"},"feature:issues"),"."),(0,i.kt)("p",null,"That is good, but you want to be able to ask ",(0,i.kt)("inlineCode",{parentName:"p"},"is anne related to feature:issues as access?"),", not ",(0,i.kt)("inlineCode",{parentName:"p"},"is organization:alpha related to feature:issues as access?"),". As in, you want the subscriber members to have access to the feature, not the subscriber itself."),(0,i.kt)("p",null,"In order to do that, you will add a relation on the plan, that indicates that all members of an organization subscribed to it, have a ",(0,i.kt)("inlineCode",{parentName:"p"},"subscriber_member")," relation to the plan. And you can modify the change you did above to give implied access to the ",(0,i.kt)("inlineCode",{parentName:"p"},"subscriber_member")," instead of the subscriber. Like so:"),(0,i.kt)(r.lG,{description:"Notice that `subscriber` has been updated to `subscriber_member` in the `access` relation of the `feature` type.\n  Under the `plan` type, in order for someone to have a `subscriber_member` relation to the plan, they have to be related as a `member` to the object related as a `subscriber` to the plan (as in they have to be a member of on of the plan's subscribers).",configuration:{type_definitions:[{type:"user"},{type:"feature",relations:{associated_plan:{this:{}},access:{union:{child:[{this:{}},{tupleToUserset:{tupleset:{relation:"associated_plan"},computedUserset:{relation:"subscriber_member"}}}]}}}},{type:"plan",relations:{subscriber:{this:{}},subscriber_member:{tupleToUserset:{tupleset:{relation:"subscriber"},computedUserset:{relation:"member"}}}}},{type:"organization",relations:{member:{this:{}}}}]},mdxType:"AuthzModelSnippetViewer"}),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Notice that ",(0,i.kt)("inlineCode",{parentName:"p"},"subscriber")," has been updated to ",(0,i.kt)("inlineCode",{parentName:"p"},"subscriber_member")," in the ",(0,i.kt)("inlineCode",{parentName:"p"},"access")," relation of the ",(0,i.kt)("inlineCode",{parentName:"p"},"feature")," type."),(0,i.kt)("p",{parentName:"admonition"},"Under the ",(0,i.kt)("inlineCode",{parentName:"p"},"plan")," type, in order for someone to have a ",(0,i.kt)("inlineCode",{parentName:"p"},"subscriber_member")," relation to the plan, they have to be related as a ",(0,i.kt)("inlineCode",{parentName:"p"},"member")," to the object related as a ",(0,i.kt)("inlineCode",{parentName:"p"},"subscriber")," to the plan (as in they have to be a member of on of the plan's subscribers).")),(0,i.kt)("p",null,"Now ask the following query: ",(0,i.kt)("inlineCode",{parentName:"p"},"is anne related to feature:issues as access?")),(0,i.kt)(r.uT,{user:"user:anne",relation:"access",object:"feature:issues",allowed:!0,mdxType:"CheckRequestViewer"}),(0,i.kt)("h4",{id:"disallow-direction-relationship"},"Disallow Direction Relationship"),(0,i.kt)("p",null,"So far, with just a ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," authorization model, and the initial relationship tuples indication the relations you know, you configured ",(0,i.kt)(r.rZ,{format:r.v7.LongForm,mdxType:"ProductName"})," to give you the correct response."),(0,i.kt)("p",null,"Earlier on, the idea of not allowing a direct ",(0,i.kt)("inlineCode",{parentName:"p"},"access")," relation between a user and a ",(0,i.kt)("inlineCode",{parentName:"p"},"feature")," was discussed, e.g. adding a relationship tuple like ",(0,i.kt)("inlineCode",{parentName:"p"},'{ "user": "user:anne", "relation": "access", "object": "feature:y" }'),". You will remove it now."),(0,i.kt)("p",null,"To disallow a direct relationship, you need to remove ",(0,i.kt)("inlineCode",{parentName:"p"},"self"),". The following snippet:"),(0,i.kt)(r.lG,{configuration:{type:"feature",relations:{associated_plan:{this:{}},access:{union:{child:[{this:{}},{tupleToUserset:{tupleset:{relation:"associated_plan"},computedUserset:{relation:"subscriber_member"}}}]}}}},mdxType:"AuthzModelSnippetViewer"}),(0,i.kt)("p",null,"becomes"),(0,i.kt)(r.lG,{configuration:{type:"feature",relations:{associated_plan:{this:{}},access:{tupleToUserset:{tupleset:{relation:"associated_plan"},computedUserset:{relation:"subscriber_member"}}}}},mdxType:"AuthzModelSnippetViewer"}),(0,i.kt)("p",null,"With this change, even if your app layer added the following relationship tuple:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'{ "user": "user:anne", "relation": "access", "object": feature:issues }'))),(0,i.kt)("p",null,"a subsequent check for ",(0,i.kt)("inlineCode",{parentName:"p"},"is anne related to feature:issues as access?")," would return no relation. The only way for a relation to exist is if the following three relationship tuples do:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'{ "user": "user:anne", "relation": "member", "object": "organization:z" }')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'{ "user": "organization:z", "relation": "subscriber", "object": "plan:y" }')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'{ "user": "plan:y", "relation": "associated_plan", "object": "feature:issues" }'))),(0,i.kt)("h4",{id:"verification-1"},"Verification"),(0,i.kt)("p",null,"Ensure that your authorization model matches the one below"),(0,i.kt)(r.lG,{configuration:{type_definitions:[{type:"user"},{type:"feature",relations:{associated_plan:{this:{}},access:{tupleToUserset:{tupleset:{relation:"associated_plan"},computedUserset:{relation:"subscriber_member"}}}}},{type:"plan",relations:{subscriber:{this:{}},subscriber_member:{tupleToUserset:{tupleset:{relation:"subscriber"},computedUserset:{relation:"member"}}}}},{type:"organization",relations:{member:{this:{}}}}]},mdxType:"AuthzModelSnippetViewer"}),(0,i.kt)("p",null,"You will now verify that the configuration is correct by running checks for all the scenarios mentioned at the beginning of the tutorial:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Anne")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Issues")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Anne")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Draft Pull Requests")," (expecting",(0,i.kt)("inlineCode",{parentName:"li"}," no"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Anne")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Single Sign-on")," (expecting",(0,i.kt)("inlineCode",{parentName:"li"}," no"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Beth")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Issues")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Beth")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Draft Pull Requests")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Beth")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Single Sign-on")," (expecting",(0,i.kt)("inlineCode",{parentName:"li"}," no"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Charles")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Issues")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Charles")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Draft Pull Requests")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Charles")," has access to ",(0,i.kt)("strong",{parentName:"li"},"Single Sign-on")," (expecting ",(0,i.kt)("inlineCode",{parentName:"li"},"yes"),")")),(0,i.kt)(r.uT,{user:"user:anne",relation:"access",object:"feature:issues",allowed:!0,mdxType:"CheckRequestViewer"}),(0,i.kt)("p",null,"Try to verify for the other user, object and relation combinations as listed below."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"User"),(0,i.kt)("th",{parentName:"tr",align:null},"Object"),(0,i.kt)("th",{parentName:"tr",align:null},"Relation"),(0,i.kt)("th",{parentName:"tr",align:null},"Query"),(0,i.kt)("th",{parentName:"tr",align:null},"Relation?"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"anne")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"feature:issues")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"access")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"is anne related to feature:issues as access?")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"anne")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"feature:draft_prs")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"access")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"is anne related to feature:draft_prs as access?")),(0,i.kt)("td",{parentName:"tr",align:null},"No")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"anne")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"feature:sso")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"access")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"is anne related to feature:sso as access?")),(0,i.kt)("td",{parentName:"tr",align:null},"No")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"beth")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"feature:issues")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"access")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"is beth related to feature:issues as access?")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"beth")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"feature:draft_prs")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"access")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"is beth related to feature:draft_prs as access?")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"beth")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"feature:sso")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"access")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"is beth related to feature:sso as access?")),(0,i.kt)("td",{parentName:"tr",align:null},"No")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"charles")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"feature:issues")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"access")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"is charles related to feature:issues as access?")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"charles")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"feature:draft_prs")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"access")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"is charles related to feature:draft_prs as access?")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"charles")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"feature:sso")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"access")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"is charles related to feature:sso as access?")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes")))),(0,i.kt)("h2",{id:"summary"},"Summary"),(0,i.kt)("p",null,"In this tutorial, you learned:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"to model entitlements for a system in ",(0,i.kt)(r.rZ,{format:r.v7.LongForm,mdxType:"ProductName"})),(0,i.kt)("li",{parentName:"ul"},"how to start with a set of requirements and scenarios and iterate on the ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," authorization model until the checks match the expected scenarios"),(0,i.kt)("li",{parentName:"ul"},"how to model ",(0,i.kt)("a",{parentName:"li",href:"/docs/modeling/parent-child"},(0,i.kt)("strong",{parentName:"a"},"parent-child relationships"))," to indicate that a user having a relationship with a certain object implies having a relationship with another object in ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})),(0,i.kt)("li",{parentName:"ul"},"how to use ",(0,i.kt)("a",{parentName:"li",href:"/docs/configuration-language#the-union-operator"},(0,i.kt)("strong",{parentName:"a"},"the union operator"))," condition to indicate multiple possible paths for a relationship between two objects to be computed"),(0,i.kt)("li",{parentName:"ul"},"using the ",(0,i.kt)("a",{parentName:"li",href:"/docs/configuration-language#the-direct-relationship-keyword"},(0,i.kt)("strong",{parentName:"a"},"direct relationship keyword"))," (",(0,i.kt)("inlineCode",{parentName:"li"},"self"),") in a ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"})," authorization model, and how to block direct relationships by removing it")),(0,i.kt)(r.XQ,{title:"Entitlements",preset:"entitlements",example:"Entitlements",store:"entitlements",mdxType:"Playground"}),(0,i.kt)("p",null,"Upcoming tutorials will dive deeper into ",(0,i.kt)(r.rZ,{format:r.v7.ShortForm,mdxType:"ProductName"}),", introducing concepts that will improve on the model you built today, and tackling different permission systems, with other relations and requirements that need to be met."))}m.isMDXComponent=!0},48847:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/entitlements-image-github-draft-pr-2ee031c09e3924b41681861e56aab2e7.svg"},15084:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/entitlements-image-github-no-draft-pr-785626465cfe1b8183918ee6bd3aefb1.svg"},9843:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/entitlements-image-pricing-github-2276507856dd07b091bcecc2376dde05.svg"},17638:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/entitlements-requirements-fdd4048edc4d4b3b78785f4c0671e0b1.svg"}}]);