"use strict";(self.webpackChunkopenfga_dev=self.webpackChunkopenfga_dev||[]).push([[5019],{14697:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var i=n(87462),a=(n(67294),n(3905)),o=n(5270);const r={title:"Production Best Practices",description:"Best Practices of Running OpenFGA in a Production Environment",sidebar_position:8,slug:"/getting-started/running-in-production"},s="Running OpenFGA in Production",d={unversionedId:"content/getting-started/production-best-practices",id:"content/getting-started/production-best-practices",title:"Production Best Practices",description:"Best Practices of Running OpenFGA in a Production Environment",source:"@site/docs/content/getting-started/production-best-practices.mdx",sourceDirName:"content/getting-started",slug:"/getting-started/running-in-production",permalink:"/docs/getting-started/running-in-production",draft:!1,editUrl:"https://github.com/openfga/openfga.dev/edit/main/docs/content/getting-started/production-best-practices.mdx",tags:[],version:"current",sidebarPosition:8,frontMatter:{title:"Production Best Practices",description:"Best Practices of Running OpenFGA in a Production Environment",sidebar_position:8,slug:"/getting-started/running-in-production"},sidebar:"docs",previous:{title:"Immutable Authorization Models",permalink:"/docs/getting-started/immutable-models"},next:{title:"Managing Tuples and Invoking API Best Practices",permalink:"/docs/getting-started/tuples-api-best-practices"}},c={},l=[{value:"Database Recommendations",id:"database-recommendations",level:2},{value:"Related Sections",id:"related-sections",level:2}],g={toc:l},u="wrapper";function p(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,i.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"running-openfga-in-production"},"Running OpenFGA in Production"),(0,a.kt)(o.AH,{mdxType:"DocumentationNotice"}),(0,a.kt)("p",null,"The following list outlines some guidelines and best practices for running OpenFGA in a production environment:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/getting-started/setup-openfga/docker#configuring-authentication"},"Configure Authentication")),(0,a.kt)("li",{parentName:"ul"},"Enable HTTP TLS or gRPC TLS or both"),(0,a.kt)("li",{parentName:"ul"},'Set the log.format to "json"'),(0,a.kt)("li",{parentName:"ul"},'Set the log.level to "info"'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/getting-started/setup-openfga/docker#playground"},"Disable the Playground"),".")),(0,a.kt)("h2",{id:"database-recommendations"},"Database Recommendations"),(0,a.kt)("p",null,"To ensure good performance for OpenFGA, it is recommended that the ",(0,a.kt)("a",{parentName:"p",href:"/docs/getting-started/setup-openfga/docker#configuring-data-storage"},"database")," be:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Used exclusively for OpenFGA and not shared with other applications. This allows scaling the database independently and avoiding contention with your database."),(0,a.kt)("li",{parentName:"ul"},"Bootstrapped and managed with the ",(0,a.kt)("inlineCode",{parentName:"li"},"openfga migrate")," command. This will ensure the appropriate database indexes are created.")),(0,a.kt)("p",null,"In addition, it's strongly recommended to fine-tune your server settings:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The server setting ",(0,a.kt)("inlineCode",{parentName:"li"},"OPENFGA_DATASTORE_MAX_OPEN_CONNS")," should be set to be equal to your database's max connections. For example, in Postgres, you can see this value via running the SQL query ",(0,a.kt)("inlineCode",{parentName:"li"},"SHOW max_connections;"),". If you are running multiple instances of the OpenFGA server, you should divide this setting equally among the instances. For example, if your database's ",(0,a.kt)("inlineCode",{parentName:"li"},"max_connections")," is 100, and you have 2 OpenFGA instances, ",(0,a.kt)("inlineCode",{parentName:"li"},"OPENFGA_DATASTORE_MAX_OPEN_CONNS")," should be set to 50 for each instance.")),(0,a.kt)("h2",{id:"related-sections"},"Related Sections"),(0,a.kt)(o.$q,{description:"Check the following sections for more on how to run OpenFGA in production environment.",relatedLinks:[{title:"Data and API Best Practices",description:"Learn the best practices for managing data and invoking APIs in production environment",link:"./tuples-api-best-practices",id:"./tuples-api-best-practices"},{title:"Migrating Relations",description:"Learn how to migrate relations in a production environment",link:"../modeling/migrating/migrating-relations",id:"../modeling/migrating/migrating-relations"},{title:"Migrating Schema 1.1",description:"Learn how to migrate to model schema 1.1",link:"../modeling/migrating/migrating-schema-1-1",id:"../modeling/migrating/migrating-schema-1-1"}],mdxType:"RelatedSection"}))}p.isMDXComponent=!0}}]);