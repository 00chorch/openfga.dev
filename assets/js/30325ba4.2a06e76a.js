"use strict";(self.webpackChunkopenfga_dev=self.webpackChunkopenfga_dev||[]).push([[4374],{55874:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var a=o(87462),n=(o(67294),o(3905)),i=o(5270);const r={sidebar_position:1,slug:"/modeling/direct-access"},s="Direct Access",l={unversionedId:"content/modeling/direct-access",id:"content/modeling/direct-access",title:"Direct Access",description:"In this guide you will learn how to grant a  access to an  (such as a certain document) in .",source:"@site/docs/content/modeling/direct-access.mdx",sourceDirName:"content/modeling",slug:"/modeling/direct-access",permalink:"/docs/modeling/direct-access",draft:!1,editUrl:"https://github.com/openfga/openfga.dev/edit/main/docs/content/modeling/direct-access.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"/modeling/direct-access"},sidebar:"docs",previous:{title:"Get Started with Modeling",permalink:"/docs/modeling/getting-started"},next:{title:"User Groups",permalink:"/docs/modeling/user-groups"}},c={},d=[{value:"Before you start",id:"before-you-start",level:2},{value:"<ProductName format={ProductNameFormat.ShortForm}/> Concepts",id:"-concepts",level:3},{value:"Step By Step",id:"step-by-step",level:2},{value:"01. Create A Relationship Tuple",id:"01-create-a-relationship-tuple",level:3},{value:"02. Check That The Relationship Exists",id:"02-check-that-the-relationship-exists",level:3},{value:"Related Sections",id:"related-sections",level:2}],p={toc:d};function u(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"direct-access"},"Direct Access"),(0,n.kt)(i.AH,{mdxType:"DocumentationNotice"}),(0,n.kt)("p",null,"In this guide you will learn how to grant a ",(0,n.kt)(i.uH,{section:"what-is-a-user",linkName:"user",mdxType:"ProductConcept"})," access to an ",(0,n.kt)(i.uH,{section:"what-is-an-object",linkName:"object",mdxType:"ProductConcept"})," (such as a certain document) in ",(0,n.kt)(i.rZ,{format:i.v7.ProductLink,mdxType:"ProductName"}),"."),(0,n.kt)(i.S1,{title:"When to use",appearance:"filled",description:(0,n.kt)("div",null,(0,n.kt)("p",null,"Granting access with ",(0,n.kt)("em",{parentName:"p"},(0,n.kt)(i.uH,{section:"what-is-a-relationship-tuple",linkName:"relationship tuple",mdxType:"ProductConcept"}))," is a core part of ",(0,n.kt)(i.rZ,{format:i.v7.ShortForm,mdxType:"ProductName"}),". Without them, any ",(0,n.kt)("em",{parentName:"p"},(0,n.kt)(i.uH,{section:"what-is-a-check-request",linkName:"checks",mdxType:"ProductConcept"}))," will fail. You should use:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"authorization model")," to represent what ",(0,n.kt)("strong",{parentName:"li"},"relation"),"s are possible between the users and objects in the system"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"relationship tuples")," to represent the facts about the relationships between users and objects in your system."))),mdxType:"CardBox"}),(0,n.kt)("h2",{id:"before-you-start"},"Before you start"),(0,n.kt)("p",null,"In order to understand this guide correctly you must be familiar with some ",(0,n.kt)(i.uH,{mdxType:"ProductConcept"})," and know how to develop the things that we will list below."),(0,n.kt)("details",null,(0,n.kt)("summary",null,(0,n.kt)("p",null,"Assume that you have the following ",(0,n.kt)(i.uH,{section:"what-is-an-authorization-model",linkName:"authorization model",mdxType:"ProductConcept"}),".",(0,n.kt)("br",null),"\nYou have a ",(0,n.kt)(i.uH,{section:"what-is-a-type",linkName:"type",mdxType:"ProductConcept"})," called ",(0,n.kt)("inlineCode",{parentName:"p"},"document")," that can have a ",(0,n.kt)("inlineCode",{parentName:"p"},"viewer")," and/or an ",(0,n.kt)("inlineCode",{parentName:"p"},"editor"),".")),(0,n.kt)(i.lG,{configuration:{schema_version:"1.1",type_definitions:[{type:"user"},{type:"document",relations:{viewer:{this:{}},editor:{this:{}}},metadata:{relations:{viewer:{directly_related_user_types:[{type:"user"}]},editor:{directly_related_user_types:[{type:"user"}]}}}}]},mdxType:"AuthzModelSnippetViewer"}),(0,n.kt)("hr",null),(0,n.kt)("p",null,"In addition, you will need to know the following:"),(0,n.kt)("h3",{id:"-concepts"},(0,n.kt)(i.rZ,{format:i.v7.ShortForm,mdxType:"ProductName"})," Concepts"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"A ",(0,n.kt)(i.uH,{section:"what-is-a-type",linkName:"Type",mdxType:"ProductConcept"}),": a class of objects that have similar characteristics"),(0,n.kt)("li",{parentName:"ul"},"A ",(0,n.kt)(i.uH,{section:"what-is-a-user",linkName:"User",mdxType:"ProductConcept"}),": an entity in the system that can be related to an object"),(0,n.kt)("li",{parentName:"ul"},"A ",(0,n.kt)(i.uH,{section:"what-is-a-relation",linkName:"Relation",mdxType:"ProductConcept"}),": is a string defined in the type definition of an authorization model that defines the possibility of a relationship between an object of the same type as the type definition and a user in the system"),(0,n.kt)("li",{parentName:"ul"},"An ",(0,n.kt)(i.uH,{section:"what-is-an-object",linkName:"Object",mdxType:"ProductConcept"}),": represents an entity in the system. Users' relationships to it can be define through relationship tuples and the authorization model"),(0,n.kt)("li",{parentName:"ul"},"A ",(0,n.kt)(i.uH,{section:"what-is-a-relationship-tuple",linkName:"Relationship Tuple",mdxType:"ProductConcept"}),": a grouping consisting of a user, a relation and an object stored in ",(0,n.kt)(i.rZ,{format:i.v7.ShortForm,mdxType:"ProductName"})))),(0,n.kt)(i.XQ,{mdxType:"Playground"}),(0,n.kt)("h2",{id:"step-by-step"},"Step By Step"),(0,n.kt)("p",null,"For our applications to understand that ",(0,n.kt)("strong",{parentName:"p"},"user x")," has access to ",(0,n.kt)("strong",{parentName:"p"},"document y"),", we need to provide ",(0,n.kt)(i.rZ,{format:i.v7.LongForm,mdxType:"ProductName"})," that information through ",(0,n.kt)("em",{parentName:"p"},(0,n.kt)(i.uH,{section:"what-is-a-relationship-tuple",linkName:"relationship tuples",mdxType:"ProductConcept"})),".\nEach ",(0,n.kt)("em",{parentName:"p"},"relationship tuple")," has three basic parameters, a ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)(i.uH,{section:"what-is-a-user",linkName:"user",mdxType:"ProductConcept"})),", a ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)(i.uH,{section:"what-is-a-relation",linkName:"relation",mdxType:"ProductConcept"}))," and an ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)(i.uH,{section:"what-is-an-object",linkName:"object",mdxType:"ProductConcept"})),"."),(0,n.kt)("h3",{id:"01-create-a-relationship-tuple"},"01. Create A Relationship Tuple"),(0,n.kt)("p",null,"Let us add a ",(0,n.kt)("em",{parentName:"p"},(0,n.kt)(i.uH,{section:"what-is-a-relationship-tuple",linkName:"relationship tuple",mdxType:"ProductConcept"}))," to indicate that ",(0,n.kt)("strong",{parentName:"p"},"bob")," who is an ",(0,n.kt)("inlineCode",{parentName:"p"},"editor")," of ",(0,n.kt)("strong",{parentName:"p"},"document:meeting_notes.doc"),". This is represented by adding the following:"),(0,n.kt)(i.Gb,{relationshipTuples:[{user:"user:bob",relation:"editor",object:"document:meeting_notes.doc"}],mdxType:"WriteRequestViewer"}),(0,n.kt)("h3",{id:"02-check-that-the-relationship-exists"},"02. Check That The Relationship Exists"),(0,n.kt)("p",null,"Once that ",(0,n.kt)("em",{parentName:"p"},"relationship tuple")," is added to ",(0,n.kt)(i.rZ,{format:i.v7.ShortForm,mdxType:"ProductName"}),", we can ",(0,n.kt)("em",{parentName:"p"},(0,n.kt)(i.uH,{section:"what-is-a-check-request",linkName:"check",mdxType:"ProductConcept"}))," if the relationship is valid by asking the following: ",(0,n.kt)("strong",{parentName:"p"},'"is bob an editor of document:meeting_notes.doc?"')),(0,n.kt)(i.uT,{user:"user:bob",relation:"editor",object:"document:meeting_notes.doc",allowed:!0,mdxType:"CheckRequestViewer"}),(0,n.kt)("p",null,"If we were to ",(0,n.kt)("em",{parentName:"p"},"check")," the following: ",(0,n.kt)("strong",{parentName:"p"},'"is bob a viewer of document:meeting_notes.doc?"')," it would return ",(0,n.kt)("strong",{parentName:"p"},"false")," since that ",(0,n.kt)("em",{parentName:"p"},"relationship tuple")," does not exist within ",(0,n.kt)(i.rZ,{format:i.v7.ShortForm,mdxType:"ProductName"})," yet."),(0,n.kt)(i.uT,{user:"user:bob",relation:"viewer",object:"document:meeting_notes.doc",allowed:!1,mdxType:"CheckRequestViewer"}),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("strong",{parentName:"p"},"Note:")," When creating relationship tuples for ",(0,n.kt)(i.rZ,{format:i.v7.LongForm,mdxType:"ProductName"})," make sure to use unique ids for each object and user within your application domain. We're using first names and simple ids to just illustrate an easy-to-follow example.")),(0,n.kt)("h2",{id:"related-sections"},"Related Sections"),(0,n.kt)(i.$q,{description:"Check the following sections for more on how to model with {ProductName}.",relatedLinks:[{title:"{ProductName} Concepts",description:"Learn about the {ProductName} Concepts.",link:"../concepts",id:"../fga-concepts"},{title:"Modeling: Getting Started",description:"Learn about how to get started with modeling.",link:"./getting-started",id:"./getting-started"},{title:"Configuration Language",description:"Learn about {ProductName} Configuration Language.",link:"../configuration-language",id:"../configuration-language"}],mdxType:"RelatedSection"}))}u.isMDXComponent=!0}}]);